app.controller("lavadoController",["$scope","$http","Factory","toasty","DTOptionsBuilder",function(e,o,t,r,n){e.codDisabled=!1,e._lineaHistory=null,e.dtOptions=n.newOptions().withOption("order",[2,"desc"]).withLanguage({sProcessing:"Procesando...",sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"No se ha encontrado ningún dato",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:"Cargando...",oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}),$(document).ready(function(){$("#selectLinea").select2().select2("val","NULL"),$("#selectLineaHistory").select2().select2("val","NULL"),e.getHistory(),$("input").each(function(){var e=$(this),o=e.next(),t=o.text();o.remove(),e.iCheck({checkboxClass:"icheckbox_line-blue",radioClass:"iradio_line",insert:'<div class="icheck_line-icon"></div>'+t})}),$("input").on("ifUnchecked",function(e){$("#_codigo").attr("disabled",!0)}),$("input").on("ifChecked",function(o){$("#_codigo").attr("disabled",!1),e._barcode=""})}),e.getHistory=function(){t.getHistory().then(function(o){e.history=o.data})},e.registrar=function(){"NULL"!=e._linea?"disabled"==$("#_codigo").attr("disabled")?(e._barcode="SIN_CODIGO",t.insRecord(e._linea,e._barcode).then(function(o){r.success({title:"Registro de Lavado Exitoso!"}),e._codigo="",e.getHistory()})):angular.isDefined(e._codigo)?(e._barcode=e._codigo,e._barcode.match("^[0-9]{10}$")?t.insRecord(e._linea,e._barcode).then(function(o){r.success({title:"Registro de Lavado Exitoso!"}),e._codigo="",e.getHistory()}):r.error({title:"Error!!",msg:"El Código de Panel no cumple con los requisitos de la expresión regular (10 Digitos)"})):(console.log("Debe Ingresar un código de referencia para el Panel"),r.error({title:"Error!",msg:"Debe Ingresar un código de referencia para el Panel"})):r.error({title:"Error!",msg:"Debe Seleccionar una Línea"})},e.filtrar=function(o){var r=$(o.target).serialize();t.filtrar(r,e._lineaHistory).then(function(o){e.history="",e.history=o.data})},e.validar=function(o){13===o.which&&e.registrar()}}]),app.factory("Factory",["$http",function(e){return{insRecord:function(o,t){return e.get("save/"+o+"/"+t)},getHistory:function(){return e.get("placas/get/all")},filtrar:function(o,t){return e.get("placas/get/all?"+o+"&linea="+t)}}}]);